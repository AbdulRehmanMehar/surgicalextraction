(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e854ee0"],{"1c4c":function(t,e,a){"use strict";var r=a("9b43"),i=a("5ca1"),n=a("4bf8"),s=a("1fa8"),o=a("33a4"),l=a("9def"),c=a("f1ae"),d=a("27ee");i(i.S+i.F*!a("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,i,u,f=n(t),g="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,p=void 0!==v,m=0,_=d(f);if(p&&(v=r(v,h>2?arguments[2]:void 0,2)),void 0==_||g==Array&&o(_))for(e=l(f.length),a=new g(e);e>m;m++)c(a,m,p?v(f[m],m):f[m]);else for(u=_.call(f),a=new g;!(i=u.next()).done;m++)c(a,m,p?s(u,v,[i.value,m],!0):i.value);return a.length=m,a}})},"5df3":function(t,e,a){"use strict";var r=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=r(e,a),this._i+=t.length,{value:t,done:!1})}))},"7a60":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{margin:"100px auto"}},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v(t._s("new"==t.form_type?"Add Category":"Edit Category"))])]),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("form",{on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Name")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g Surgical",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),t.categories&&t.categories.length?a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Category")]),a("div",{staticClass:"control is-fullwidth"},[a("div",{staticClass:"select is-fullwidth"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.parent,expression:"parent"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.parent=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"none"}},[t._v("None")]),t._l(t.categories,(function(e){return a("option",{key:e.id,style:{display:e.id==t.category_id||e.parent&&e.parent.id==t.category_id?"none":"initial"},domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)])])]):t._e(),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Images")]),a("div",{staticClass:"file has-name is-fullwidth"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{type:"file",accept:"image/*",multiple:""},on:{change:function(e){return t.handleFileChange(e)}}}),t._m(0)])]),"edit"==t.form_type?a("div",{staticClass:"help"},[t._v("This will add images to category and won't delete previous ones.")]):t._e()]),t.form_errors&&t.form_errors.length?a("div",{staticClass:"field has-text-danger"},t._l(t.form_errors,(function(e,r){return a("p",{key:r,staticClass:"help"},[t._v(t._s(e))])})),0):t._e()])])]),a("div",{staticClass:"card-footer"},[a("div",{staticClass:"card-footer-item"},[a("button",{staticClass:"button is-fullwidth",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitCategoryForm(e)}}},[t._v("Save")])])])]),a("br"),a("br"),a("div",{staticClass:"card"},[t._m(1),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content",staticStyle:{"overflow-x":"auto"}},[a("table",{staticClass:"table"},[t._m(2),t.categories&&t.categories.length?a("tbody",t._l(t.categories,(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.parent?e.parent.name:"None"))]),a("td",[a("router-link",{attrs:{to:{name:"category",params:{id:e.id}}}},[t._v("View")])],1),a("td",[a("router-link",{attrs:{to:{name:"manage-categories",query:{id:e.id}}}},[t._v("Edit")])],1),a("td",[a("a",{on:{click:function(a){return a.preventDefault(),t.deleteCategory(a,e)}}},[t._v("Delete")])])])})),0):t._e()])])])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),a("span",{staticClass:"file-label"},[t._v("\n                                            Choose a fileâ€¦\n                                        ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("Categories")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Name")]),a("th",[t._v("Parent")]),a("th",{attrs:{colspan:"3"}},[t._v("Actions")])])])}],n=(a("5df3"),a("1c4c"),a("ac6a"),a("a481"),a("7f7f"),{data:function(){return{name:null,parent:"none",categories:null,images:null,category_id:null,form_type:"new",form_errors:[]}},created:function(){this.$route.query.id&&this.editCategory(this.$route.query.id),this.loadCategories()},beforeRouteUpdate:function(t,e,a){t.query.id&&this.editCategory(t.query.id),a()},methods:{loadCategories:function(){var t=this;this.$store.dispatch("get_all_categories").then((function(e){t.categories=e.data.data})).catch((function(t){return console.log(t)}))},submitCategoryForm:function(){var t=this,e={name:this.name,parent:"none"==this.parent?null:this.parent,category_id:this.category_id};this.$store.dispatch("new"==this.form_type?"add_new_category":"edit_category",e).then((function(e){t.$toastr("info","Success! Category was "+("new"==t.form_type?"added.":"updated."),"Information"),t.handleOtherEvents(e),t.name=null,t.parent="none",t.category_id=null,t.images=null,"edit"==t.form_type&&t.$router.replace({name:"manage-categories"}),t.form_type="new",t.loadCategories()})).catch((function(e){if(t.form_errors=[],e.response&&e.response.data&&e.response.data.errors)for(var a in e.response.data.errors)a&&a.length&&t.form_errors.push(e.response.data.errors[a][0])}))},handleOtherEvents:function(t){var e=this;if(t.data.data.id&&this.images&&this.images.length){console.log(this.images);var a=!0;Array.from(this.images).forEach((function(r){var i=new FormData;i.append("image",r),i.append("imageable_type","category"),i.append("imageable_id",t.data.data.id),e.$store.dispatch("addImage",i).catch((function(t){return a=!1}))})),a?this.$toastr("info","Success! Images were uploaded.","Information"):this.$toastr("danger","Aaah! Something went wrong while uploading Images.","Error")}},editCategory:function(t){var e=this;this.$store.dispatch("get_category_data",t).then((function(t){t.data.data?(e.name=t.data.data.name,e.category_id=t.data.data.id,e.parent=t.data.data.parent?t.data.data.parent.id:"none",e.form_type="edit",window.scrollTo(0,0)):e.$toastr("error","Success! Something is not right.","Error")}))},handleFileChange:function(t){this.images=t.target.files},deleteCategory:function(t,e){var a=this;0==e.products.length&&0==e.subcategories.length?this.$store.dispatch("delete_category",e.id).then((function(t){a.$toastr("info","Success! Category was deleted.","Information"),a.loadCategories()})).catch((function(t){return a.$toastr("error","Aah! Category wasn't deleted.","Error")})):this.$toastr("info","Category contains subcategories or products and cannot be deleted.","Information")}}}),s=n,o=a("2877"),l=Object(o["a"])(s,r,i,!1,null,null,null);e["default"]=l.exports},a481:function(t,e,a){"use strict";var r=a("cb7c"),i=a("4bf8"),n=a("9def"),s=a("4588"),o=a("0390"),l=a("5f1b"),c=Math.max,d=Math.min,u=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,g=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,(function(t,e,a,v){return[function(r,i){var n=t(this),s=void 0==r?void 0:r[e];return void 0!==s?s.call(r,n,i):a.call(String(n),r,i)},function(t,e){var i=v(a,t,this,e);if(i.done)return i.value;var u=r(t),f=String(this),g="function"===typeof e;g||(e=String(e));var m=u.global;if(m){var _=u.unicode;u.lastIndex=0}var y=[];while(1){var C=l(u,f);if(null===C)break;if(y.push(C),!m)break;var S=String(C[0]);""===S&&(u.lastIndex=o(f,n(u.lastIndex),_))}for(var b="",w=0,L=0;L<y.length;L++){C=y[L];for(var $=String(C[0]),A=c(d(s(C.index),f.length),0),k=[],x=1;x<C.length;x++)k.push(h(C[x]));var T=C.groups;if(g){var E=[$].concat(k,A,f);void 0!==T&&E.push(T);var M=String(e.apply(void 0,E))}else M=p($,f,A,k,T,e);A>=w&&(b+=f.slice(w,A)+M,w=A+$.length)}return b+f.slice(w)}];function p(t,e,r,n,s,o){var l=r+t.length,c=n.length,d=g;return void 0!==s&&(s=i(s),d=f),a.call(o,d,(function(a,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(l);case"<":o=s[i.slice(1,-1)];break;default:var d=+i;if(0===d)return a;if(d>c){var f=u(d/10);return 0===f?a:f<=c?void 0===n[f-1]?i.charAt(1):n[f-1]+i.charAt(1):a}o=n[d-1]}return void 0===o?"":o}))}}))},ac6a:function(t,e,a){for(var r=a("cadf"),i=a("0d58"),n=a("2aba"),s=a("7726"),o=a("32e9"),l=a("84f2"),c=a("2b4c"),d=c("iterator"),u=c("toStringTag"),f=l.Array,g={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(g),v=0;v<h.length;v++){var p,m=h[v],_=g[m],y=s[m],C=y&&y.prototype;if(C&&(C[d]||o(C,d,f),C[u]||o(C,u,m),l[m]=f,_))for(p in r)C[p]||n(C,p,r[p],!0)}},f1ae:function(t,e,a){"use strict";var r=a("86cc"),i=a("4630");t.exports=function(t,e,a){e in t?r.f(t,e,i(0,a)):t[e]=a}}}]);
//# sourceMappingURL=chunk-3e854ee0.69818d3a.js.map